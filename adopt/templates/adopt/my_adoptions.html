{% extends "base.html" %}

{% block content %}

{% if has_requests %}
	<div class="adoption_container">
		<div>
			<h3>Approved requests</h3>
			{% if approved_list %}
				<table>
					<thead>
						<tr>
							<th>Cat</th>
							<th>Date</th>
						</tr>
					</thead>

					<tbody>
						{% for request in approved_list %}
							<tr>
								<td>{{ request.cat.name }}</td>
								<td>{{ request.datetime }}</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			{% endif %}
		</div>

		<div>
			<h3>Pending requests</h3>
			{% if pending_list %}
				<form action="{% url 'adopt:delete_adoption' %}" method="post">
					{% csrf_token %}
					<table>
						<thead>
							<tr>
								<th>Cat</th>
								<th>Date</th>
								<th>Withdraw?</th>
							</tr>
						</thead>

						<tbody>
							{% for request in pending_list %}
								<tr>
									<td><a href="{% url 'cats:detail' request.cat.id %}">{{ request.cat.name }}</a></td>
									<td>{{ request.datetime }}</td>
									<td><input type="checkbox" id="{{ request.id }}" name="to_delete" value="{{ request.id }}"></td>
								</tr>
							{% endfor %}
						</tbody>
					</table>

					<br>
					
					<input type="submit" value="Withdraw">
				</form>
			{% endif %}
		</div>

		<div>
			<h3>Rejected requests</h3>
			{% if rejected_list %}
				<table>
					<thead>
						<tr>
							<th>Cat</th>
							<th>Date</th>
							<th>Reason</th>
						</tr>
					</thead>

					<tbody>
						{% for request in rejected_list %}
							<tr>
								<td>{{ request.cat.name }}</td>
								<td>{{ request.datetime }}</td>
								<td>{{ request.reason }}</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			{% endif %}
		</div>
	</div>
{% else %}
	<p>You haven't made any adoption requests!</p>
{% endif %}

{% endblock %}